<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SOSCozinhas</title>
</head>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css"/>
  <style>
    :root{
      --site-bg: {{ theme.bg_color }};
      --text-color: {{ theme.text_color if theme.get('text_color') else '#0f172a' }};
      --header-bg: {{ theme.header_bg }};
      --header-text: {{ theme.header_text }};
      --hero-arrow: rgba(255,255,255,0.75);
      --primary: {{ theme.primary }};
      --primary-text: {{ theme.primary_text }};
      --footer-bg: {{ theme.footer_bg }};
      --footer-text: {{ theme.footer_text }};
      --btn-radius: {{ theme.button_radius }};
    }
  body { background-color: var(--site-bg); color: var(--text-color); }
  .hero-text { position: absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:#fff; text-align:center; text-shadow:0 0 10px rgba(0,0,0,0.6); }
    header { background-color: var(--header-bg) !important; color: var(--header-text) !important; }
    /* make header full-bleed and place logo/nav at corners on larger screens */
    /* make header full-bleed and place logo/nav at viewport corners */
  .site-header-inner { width:100%; max-width: none; margin: 0; display: flex; align-items: center; justify-content: space-between; padding-left: 0.5rem; padding-right: 0.5rem; }
    @media(min-width:768px){
      .site-header-inner{ padding-left: 0.5rem; padding-right: 0.5rem; }
    }
  /* mobile dropdown menu (small panel anchored under header) */
  #mobileMenu { display:none; }
  /* when open, show a small panel aligned to the right under the header */
  #mobileMenu.open { display:block; position:fixed; top:0; right:0; left:0; z-index:60; pointer-events:auto; }
  /* align the dropdown to the header's right (near the hamburger) */
  #mobileMenu .menu-inner { background: rgba(0,0,0,0.68); padding: 0.75rem 1rem; width: auto; min-width: 160px; max-width: 320px; margin: 0; border-radius: 8px; box-shadow: 0 8px 24px rgba(2,6,23,0.6); color: var(--header-text); transform: translateY(-6px); opacity:0; transition: transform 200ms ease, opacity 200ms ease; position: absolute; right: 0.5rem; top: 3.75rem; }
  #mobileMenu.open .menu-inner{ transform: translateY(0); opacity:1; }
  #mobileMenu .menu-inner a{ display:block; padding:0.75rem 0; color: var(--header-text); }
  /* hamburger button (three lines) */
  .hamburger { width:28px; height:20px; display:inline-block; position:relative; cursor:pointer; background:none; border:none; }
  .hamburger span { position:absolute; left:0; right:0; height:2px; background: var(--header-text); transition: transform 0.25s ease, opacity 0.25s ease; }
  .hamburger span:nth-child(1){ top:0; }
  .hamburger span:nth-child(2){ top:9px; }
  .hamburger span:nth-child(3){ bottom:0; }
  .hamburger.open span:nth-child(1){ transform: translateY(9px) rotate(45deg); }
  .hamburger.open span:nth-child(2){ opacity:0; }
  .hamburger.open span:nth-child(3){ transform: translateY(-9px) rotate(-45deg); }
    /* Swiper hero arrow styling: subtle translucent white */
    .swiper-button-next, .swiper-button-prev {
      color: var(--hero-arrow);
      background: transparent;
      width: 44px;
      height: 44px;
      border-radius: 9999px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: none;
      opacity: 0.95;
    }
    .swiper-button-next::after, .swiper-button-prev::after {
      font-size: 18px;
      color: var(--hero-arrow);
      text-shadow: 0 2px 6px rgba(0,0,0,0.35);
    }
    a.theme-btn { background-color: var(--primary); color: var(--primary-text); border-radius: var(--btn-radius); }
    footer { background-color: var(--footer-bg); color: var(--footer-text); }
    .copyright { border-color: rgba(255,255,255,0.08); text-align:center; padding:0.75rem; font-size:0.875rem; color: var(--footer-text); }
  </style>
</head>
<body>

  <!-- Top Navigation -->
  <header class="bg-transparent">
    <div class="site-header-inner py-3">
      <div class="flex items-center gap-4">
        <a href="/" class="flex items-center gap-3">
          <img src="{{ url_for('static', filename=theme.logo) }}" alt="logo" class="h-10 w-10 object-cover rounded">
          <span class="font-bold text-lg">{{ theme.site_name }}</span>
        </a>
      </div>
      <nav class="hidden sm:flex items-center gap-6">
        <a href="#produtos" class="hover:underline">Produtos</a>
        <a href="/duvidas" class="hover:underline">Dúvidas</a>
        <a href="/contato" class="hover:underline">Contato</a>
      </nav>
      <div class="sm:hidden">
        <button id="mobileMenuBtn" aria-expanded="false" class="hamburger" aria-label="Abrir menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>
    <div id="mobileMenu" class="hidden sm:hidden">
      <div class="menu-inner">
        <a href="#produtos" class="block py-2">Produtos</a>
        <a href="/duvidas" class="block py-2">Dúvidas</a>
        <a href="/contato" class="block py-2">Contato</a>
      </div>
    </div>
  </header>

  {% if hero_banners %}
  <!-- Hero Carousel -->
  <div class="relative">
    <div class="swiper mySwiper h-56 sm:h-64 md:h-80 lg:h-[70vh]">
      <div class="swiper-wrapper">
        {% for h in hero_banners %}
        <div class="swiper-slide relative">
          {% if h['imagem'] %}
            <img src="{{ url_for('static', filename=h['imagem']) }}" class="w-full h-full object-cover">
          {% endif %}
          {% if (h.get('titulo') or h.get('descricao1') or h.get('descricao2')) and (h.get('show_overlay',1) == 1) %}
          <div class="hero-text max-w-3xl space-y-4 px-4">
            {% if h.get('titulo') %}<h1 class="text-2xl md:text-4xl font-bold">{{ h['titulo'] }}</h1>{% endif %}
            {% if h.get('descricao1') %}<p class="text-base md:text-lg">{{ h['descricao1'] }}</p>{% endif %}
            {% if h.get('descricao2') %}<p class="text-sm md:text-base">{{ h['descricao2'] }}</p>{% endif %}
            {% if h.get('show_button',1) == 1 %}
                <a href="#produtos" class="theme-btn inline-block mt-3 py-2 px-4">Ver Produtos</a>
              {% endif %}
          </div>
          {% endif %}
        </div>
        {% endfor %}
      </div>
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
  {% endif %}

  <!-- Produtos Section -->
  <section id="produtos" class="py-8 px-4 sm:px-8">
    <div class="max-w-6xl mx-auto">
      <div class="flex items-center justify-between mb-4 gap-3 flex-wrap">
        <h2 class="text-2xl font-bold">Nossos Produtos</h2>
        <form method="GET" class="flex items-center gap-2 flex-nowrap">
          <select name="class_id" class="border rounded py-1 px-2 text-xs sm:text-sm">
            <option value="" disabled {% if not class_id %}selected{% endif %}>Filtrar</option>
            <option value="">Todos os itens</option>
            {% for c in classes %}
            <option value="{{ c['id'] }}" {% if class_id and class_id|int==c['id'] %}selected{% endif %}>{{ c['nome'] }}</option>
            {% endfor %}
          </select>
          <select name="sort" class="border rounded py-1 px-2 text-xs sm:text-sm">
            <option value="newest" {% if sort=='newest' %}selected{% endif %}>Mais recentes</option>
            <option value="price_asc" {% if sort=='price_asc' %}selected{% endif %}>Menor preço</option>
            <option value="price_desc" {% if sort=='price_desc' %}selected{% endif %}>Maior preço</option>
          </select>
          <button class="theme-btn rounded py-1 px-2 text-xs sm:py-2 sm:px-3">Aplicar</button>
        </form>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        {% for p in produtos %}
        <div class="bg-white shadow rounded overflow-hidden flex flex-col">
          {% if p['imagem'] %}
            <div class="h-40 sm:h-48 w-full overflow-hidden bg-gray-100">
              <img src="{{ url_for('static', filename=p['imagem']) }}" class="w-full h-full object-cover transform hover:scale-105 transition duration-300" loading="lazy">
            </div>
          {% else %}
            <div class="h-40 sm:h-48 w-full bg-gray-100"></div>
          {% endif %}
          <div class="p-4 flex-1 flex flex-col">
            {% if p['ativo'] == 0 %}
              <div class="absolute mt-2 ml-2 bg-red-600 text-white text-xs py-1 px-2 rounded">Esgotado</div>
            {% endif %}
            <h3 class="font-semibold text-lg">{{ p['nome'] }}</h3>
            <p class="text-sm text-gray-600 mt-1 line-clamp-2">{{ p['descricao'] }}</p>
            <div class="mt-3 flex items-center justify-between">
              <div class="text-xl font-bold">R$ {{ format_price(p['preco']) }}</div>
              {% if contato %}
              <a href="https://wa.me/{{ contato['whatsapp'] }}" class="theme-btn py-2 px-3 rounded hover:opacity-90">Comprar</a>
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      <div class="mt-6 flex items-center justify-center space-x-2">
        {% if page>1 %}
          <a href="?page={{ page-1 }}&per_page={{ per_page }}&class_id={{ class_id if class_id else '' }}&sort={{ sort }}" class="px-3 py-1 border rounded">Anterior</a>
        {% endif %}
        <span class="px-3 py-1">Página {{ page }} / {{ total_pages }}</span>
        {% if page<total_pages %}
          <a href="?page={{ page+1 }}&per_page={{ per_page }}&class_id={{ class_id if class_id else '' }}&sort={{ sort }}" class="px-3 py-1 border rounded">Próxima</a>
        {% endif %}
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="mt-12">
    <div class="max-w-6xl mx-auto p-6 grid grid-cols-1 md:grid-cols-3 gap-6">
      <div>
        <h4 class="font-bold mb-2">SOSCozinhas</h4>
        <p class="text-sm text-gray-300">Cozinhas e utensílios de qualidade. Atendimento via WhatsApp.</p>
      </div>
      <div>
        <h4 class="font-bold mb-2">Contato</h4>
        <p class="text-sm text-gray-300">{# mostra o contato se existir #}</p>
        {% if contato %}
        <p class="text-sm">WhatsApp: <a href="https://wa.me/{{ contato['whatsapp'] }}" class="text-green-400">{{ contato['whatsapp'] }}</a></p>
        {% if contato.get('instagram') %}
        <p class="text-sm">Instagram: <a href="{{ contato['instagram'] }}" target="_blank" rel="noopener" class="text-green-400">{{ contato['instagram'] }}</a></p>
        {% endif %}
        {% if contato.get('endereco') %}
        <p class="text-sm mt-2 text-gray-300">Endereço: <span class="text-gray-200">{{ contato['endereco'] }}</span></p>
        {% endif %}
        {% endif %}
      </div>
      <div>
        <h4 class="font-bold mb-2">Siga-nos</h4>
        <div class="flex space-x-3">
          {% if contato and contato.get('instagram') %}
            <a href="{{ contato['instagram'] }}" target="_blank" rel="noopener" class="text-gray-300 hover:text-white">Instagram</a>
          {% else %}
            <span class="text-gray-300">Instagram</span>
          {% endif %}
        </div>
      </div>
    </div>
  <div class="border-t copyright">© 2025 {{ theme.site_name }} - Todos os direitos reservados</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  <script>
    var swiper = new Swiper(".mySwiper", {
      loop: true,
      autoplay: { delay: 5000, disableOnInteraction: false },
      navigation: { nextEl: ".swiper-button-next", prevEl: ".swiper-button-prev" },
      pagination: { el: ".swiper-pagination", clickable: true },
    });

    // mobile menu toggle: overlay + animated hamburger + body scroll lock
    var mobileBtn = document.getElementById('mobileMenuBtn');
    var mobileMenu = document.getElementById('mobileMenu');
    if (mobileBtn) {
      mobileBtn.addEventListener('click', function() {
        var isOpen = mobileMenu.classList.contains('open');
        if (!isOpen) {
          mobileMenu.classList.add('open');
          mobileBtn.classList.add('open');
          mobileBtn.setAttribute('aria-expanded','true');
        } else {
          mobileMenu.classList.remove('open');
          mobileBtn.classList.remove('open');
          mobileBtn.setAttribute('aria-expanded','false');
        }
      });
      // close overlay when clicking outside menu-inner
      mobileMenu.addEventListener('click', function(e){
        if (e.target === mobileMenu) {
          mobileMenu.classList.remove('open');
          mobileBtn.classList.remove('open');
          mobileBtn.setAttribute('aria-expanded','false');
        }
      });
    }
  </script>

</body>
</html>
